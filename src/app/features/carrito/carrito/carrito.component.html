<p-toast></p-toast>
<div class="cart-card">
  <h2 class="cart-title">Tu Carrito</h2>

  <div *ngIf="items.length; else empty">
    <p-table [value]="items" class="cart-table">
      <ng-template pTemplate="header">
        <tr>
          <th>Producto</th>
          <th>Cantidad</th>
          <th>Precio</th>
          <th>Subtotal</th>
          <th>Acción</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-i>
        <tr>
          <td>{{ i.nombre }}</td>
          <td>
            <p-inputNumber
              [(ngModel)]="i.cantidad"
              (onInput)="onQtyChange(i)"
              [min]="1"
            ></p-inputNumber>
          </td>
          <td>{{ i.precio | currency:'EUR' }}</td>
          <td>{{ (i.precio * i.cantidad) | currency:'EUR' }}</td>
          <td class="p-text-center">
            <button
              pButton
              icon="pi pi-trash"
              class="p-button-text"
              (click)="remove(i)"
            ></button>
          </td>
        </tr>
      </ng-template>
    </p-table>

    <div class="cart-actions">
      <button
        pButton
        label="Anular compra"
        icon="pi pi-times"
        class="p-button-secondary"
        (click)="cancelOrder()"
      ></button>
      <button
        pButton
        label="Finalizar Pedido"
        icon="pi pi-check"
        class="p-ml-3"
        (click)="placeOrder()"
      ></button>
    </div>
  </div>

  <ng-template #empty>
    <p>Tu carrito está vacío.</p>
  </ng-template>
</div>